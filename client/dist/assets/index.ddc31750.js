import{c as I,f as S,a as v,b as q,p as O,d as E,e as L,g as U,F as C,R as w,P as x,h as A,i as Q,j as k,r as u,u as j,k as t,B as z,l as D,S as $,m as n,n as y,o as M,q as V,s as G,t as B,v as H,w as F,T as N}from"./vendor.77d9ddd1.js";const b=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}};b();const g=(r,e)=>r?[...r.map(({_id:s})=>({type:e,id:s})),{type:e,id:"LIST"}]:[{type:e,id:"LIST"}],l=(r,e)=>[{type:r,id:e}],h=r=>[{type:r,id:"LIST"}],m=I({reducerPath:"shopApi",baseQuery:S({baseUrl:"/",prepareHeaders:(r,{getState:e})=>{const s=e().user.userToken;return s&&r.set("Authorization",`Bearer ${s}`),r}}),tagTypes:["Products","Users","Orders","Carts","Reviews"],endpoints:r=>({login:r.mutation({query:e=>({url:"api/v4/users/login",method:"POST",body:e}),invalidatesTags:h("Users")}),register:r.mutation({query:e=>({url:"api/v4/users/register",method:"POST",body:e}),invalidatesTags:h("Users")}),logout:r.mutation({query:()=>({url:"api/v4/users/logout",method:"POST"}),invalidatesTags:(e,s,o)=>l("Users",e._id)}),updateUser:r.mutation({query:e=>({url:"api/v4/users/me",method:"PATCH",body:e}),invalidatesTags:(e,s,o)=>l("Users",e._id)}),userProfile:r.query({query:()=>"api/v4/users/me",providesTags:(e,s,o)=>l("Users",e._id)}),getAllProducts:r.query({query:({category:e,currentPage:s})=>e?`api/v4/products?category=${e}&page=${s}`:`api/v4/products?page=${s}`,providesTags:(e,s,o)=>g(e.products,"Products")}),getProductById:r.query({query:e=>`api/v4/products/${e}`,providesTags:(e,s,o)=>l("Products",o)}),searchProduct:r.query({query({queryStr:e,page:s}){return{url:`api/v4/product/search?search=${e}&page=${s}`}},providesTags:(e,s,o)=>g(e.products,"Products")}),createOrder:r.mutation({query(e){return{url:"api/v4/orders/new-order",method:"POST",body:e}},invalidatesTags:h("Orders")}),getUserOrders:r.query({query:()=>"api/v4/orders/order",providesTags:(e,s,o)=>g(e,"Orders")}),checkOut:r.mutation({query(e){return{url:"api/v4/payment",method:"POST",body:e}}}),getUserCart:r.query({query:()=>"api/v4/user/cart",providesTags:(e,s,o)=>l("Carts",e._id)}),createUserCart:r.mutation({query(){return{url:"api/v4/user/cart",method:"POST"}},invalidatesTags:h("Carts")}),updateUserCart:r.mutation({query(e){return{url:"api/v4/user/cart",method:"PATCH",body:e}},invalidatesTags:(e,s,o)=>l("Carts",e._id)}),postReview:r.mutation({query(e){return{url:"api/v4/product/new-review",method:"POST",body:e}},invalidatesTags:h("Reviews")}),getProductReviews:r.query({query:e=>`api/v4/product/reviews/${e}`,providesTags:(e,s,o)=>g(e.reviews,"Reviews")}),getUserReview:r.query({query:e=>`api/v4/product/user/review/${e}`,providesTags:(e,s,o)=>l("Reviews",o)}),updateUserReview:r.mutation({query({updateReviewBody:e,productId:s}){return{url:`api/v4/product/user/review/${s}`,method:"PATCH",body:e}},invalidatesTags:(e,s,o)=>l("Reviews",e._id)})})}),{useLoginMutation:Pe,useRegisterMutation:Te,useLogoutMutation:Re,useUpdateUserMutation:Ie,useUserProfileQuery:Se,useGetAllProductsQuery:qe,useGetProductByIdQuery:Oe,useGetProductsByCategoryQuery:Ee,useSearchProductQuery:Le,useCreateOrderMutation:Ue,useGetUserOrdersQuery:Ce,useCheckOutMutation:we,useGetUserCartQuery:xe,useCreateUserCartMutation:Ae,useUpdateUserCartMutation:Qe,useGetProductReviewsQuery:ke,useGetUserReviewQuery:je,usePostReviewMutation:ze,useUpdateUserReviewMutation:De,reducer:Y}=m,p={products:[],cartQuantity:0,total:0},K=v({name:"cart",initialState:p,reducers:{createNewCart:(r,e)=>{r.products=p.products,r.cartQuantity=p.cartQuantity,r.total=p.total},updateCart:(r,e)=>{r.products=e.payload.products,r.cartQuantity=e.payload.cartQuantity,r.total=e.payload.total},addProduct:(r,e)=>{const s=r.products.find(o=>o._id===e.payload._id);if(s&&s.size===e.payload.size){const o=r.products.findIndex(i=>e.payload._id===i._id),a=r.products[o];a.quantity+=e.payload.quantity,r.total+=e.payload.price*e.payload.quantity}else r.products.push(e.payload),r.cartQuantity+=1,r.total+=e.payload.price*e.payload.quantity},increaseQuantity:(r,e)=>{const s=r.products.findIndex(a=>a._id===e.payload.id),o=r.products[s];o.quantity+=1,r.total+=o.price},decreaseQuantity:(r,e)=>{const s=r.products.find(o=>o._id===e.payload.id);if(s.quantity>0&&(s.quantity--,r.total-=s.price),s.quantity===0){const o=r.products.findIndex(a=>a._id===e.payload.id);r.products.splice(o,1),r.cartQuantity--}},orderSuccess:r=>{r.products=p.products,r.cartQuantity=p.cartQuantity,r.total=p.total},resetCart:r=>{r.products=p.products,r.cartQuantity=p.cartQuantity,r.total=p.total}}}),W=K.reducer,J={currentUser:null,userToken:null,isLoggedIn:!1,userAddress:{},paymentIntent:null},X=v({name:"user",initialState:J,reducers:{currentUser:(r,e)=>{r.currentUser=e.payload.user,r.isLoggedIn=!0},addPaymentIntent:(r,e)=>{r.paymentIntent=e.payload},addUserAddress:(r,e)=>{r.userAddress=e.payload},addUserToken:(r,e)=>{r.userToken=e.payload.token},logout:r=>{r.currentUser=null,r.isLoggedIn=!1,r.paymentIntent=null,r.userToken=null}}}),Z=X.reducer,ee={key:"root",version:1,storage:U},re=q({user:Z,cart:W,[m.reducerPath]:Y}),te=O(ee,re),_=E({reducer:te,middleware:r=>r({serializableCheck:{ignoredActions:[C,w,x,A,Q,k]}}).concat(m.middleware),devTools:!1});let se=L(_);const oe="modulepreload",f={},ae="/",d=function(e,s){return!s||s.length===0?e():Promise.all(s.map(o=>{if(o=`${ae}${o}`,o in f)return;f[o]=!0;const a=o.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${i}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":oe,a||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),a)return new Promise((T,R)=>{c.addEventListener("load",T),c.addEventListener("error",R)})})).then(()=>e())},ie=u.exports.lazy(()=>d(()=>import("./Home.cedcdb15.js"),["assets/Home.cedcdb15.js","assets/vendor.77d9ddd1.js","assets/Footer.d90ef9f8.js","assets/user-actions.b1b17465.js","assets/cart-actions.b198bc31.js","assets/styled-components.browser.esm.4c801d38.js","assets/responsive.ef511f16.js","assets/Newsletter.ed3f61b1.js"])),P=u.exports.lazy(()=>d(()=>import("./ProductList.3dd6e9fe.js"),["assets/ProductList.3dd6e9fe.js","assets/styled-components.browser.esm.4c801d38.js","assets/vendor.77d9ddd1.js","assets/Skeleton.a2922d2d.js","assets/user-actions.b1b17465.js","assets/Star.7e8b1702.js","assets/responsive.ef511f16.js","assets/Newsletter.ed3f61b1.js","assets/Footer.d90ef9f8.js","assets/cart-actions.b198bc31.js"])),ue=u.exports.lazy(()=>d(()=>import("./Product.ae308065.js"),["assets/Product.ae308065.js","assets/Product.cc276a29.css","assets/vendor.77d9ddd1.js","assets/styled-components.browser.esm.4c801d38.js","assets/Footer.d90ef9f8.js","assets/user-actions.b1b17465.js","assets/cart-actions.b198bc31.js","assets/responsive.ef511f16.js","assets/Newsletter.ed3f61b1.js","assets/use-input.2e302acd.js","assets/ProductLoader.1286f1ae.js","assets/Star.7e8b1702.js","assets/Remove.1ec5f4a9.js"])),ne=u.exports.lazy(()=>d(()=>import("./Register.7cdfd92e.js"),["assets/Register.7cdfd92e.js","assets/styled-components.browser.esm.4c801d38.js","assets/vendor.77d9ddd1.js","assets/use-input.2e302acd.js","assets/responsive.ef511f16.js","assets/index.387a0964.js","assets/user-actions.b1b17465.js","assets/cart-actions.b198bc31.js"])),de=u.exports.lazy(()=>d(()=>import("./Login.f3cd9b3a.js"),["assets/Login.f3cd9b3a.js","assets/styled-components.browser.esm.4c801d38.js","assets/vendor.77d9ddd1.js","assets/responsive.ef511f16.js","assets/index.387a0964.js","assets/use-input.2e302acd.js","assets/cart-actions.b198bc31.js","assets/user-actions.b1b17465.js"])),ce=u.exports.lazy(()=>d(()=>import("./Cancel.6413f58f.js"),["assets/Cancel.6413f58f.js","assets/vendor.77d9ddd1.js","assets/styled-components.browser.esm.4c801d38.js"])),pe=u.exports.lazy(()=>d(()=>import("./Success.365161b3.js"),["assets/Success.365161b3.js","assets/vendor.77d9ddd1.js","assets/styled-components.browser.esm.4c801d38.js","assets/cart-actions.b198bc31.js"])),le=u.exports.lazy(()=>d(()=>import("./Cart.2029452d.js"),["assets/Cart.2029452d.js","assets/styled-components.browser.esm.4c801d38.js","assets/vendor.77d9ddd1.js","assets/Footer.d90ef9f8.js","assets/user-actions.b1b17465.js","assets/cart-actions.b198bc31.js","assets/responsive.ef511f16.js","assets/Stepper.99161eb3.js","assets/Remove.1ec5f4a9.js"])),ye=u.exports.lazy(()=>d(()=>import("./CheckoutForm.a0ed78fa.js"),["assets/CheckoutForm.a0ed78fa.js","assets/styled-components.browser.esm.4c801d38.js","assets/vendor.77d9ddd1.js","assets/Footer.d90ef9f8.js","assets/user-actions.b1b17465.js","assets/cart-actions.b198bc31.js","assets/responsive.ef511f16.js","assets/Newsletter.ed3f61b1.js","assets/use-input.2e302acd.js","assets/index.387a0964.js","assets/Stepper.99161eb3.js"])),he=u.exports.lazy(()=>d(()=>import("./YourOrders.4e599a88.js"),["assets/YourOrders.4e599a88.js","assets/vendor.77d9ddd1.js","assets/styled-components.browser.esm.4c801d38.js","assets/Footer.d90ef9f8.js","assets/user-actions.b1b17465.js","assets/cart-actions.b198bc31.js","assets/responsive.ef511f16.js","assets/Newsletter.ed3f61b1.js","assets/ProductLoader.1286f1ae.js"])),ge=u.exports.lazy(()=>d(()=>import("./SearchProductsList.4f4dbc9a.js"),["assets/SearchProductsList.4f4dbc9a.js","assets/vendor.77d9ddd1.js","assets/styled-components.browser.esm.4c801d38.js","assets/Skeleton.a2922d2d.js","assets/user-actions.b1b17465.js","assets/Star.7e8b1702.js","assets/responsive.ef511f16.js","assets/Newsletter.ed3f61b1.js","assets/Footer.d90ef9f8.js","assets/cart-actions.b198bc31.js"])),me=u.exports.lazy(()=>d(()=>import("./404Page.06d26564.js"),["assets/404Page.06d26564.js","assets/vendor.77d9ddd1.js","assets/styled-components.browser.esm.4c801d38.js","assets/responsive.ef511f16.js"])),ve=()=>{const{isLoggedIn:r}=j(e=>e.user);return t(z,{children:t(u.exports.Suspense,{fallback:t("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:t("p",{children:"Loading..."})}),children:D($,{children:[t(n,{path:"/",exact:!0,children:t(ie,{})}),t(n,{path:"/products/:category",children:t(P,{})}),t(n,{path:"/products",exact:!0,children:t(P,{})}),t(n,{path:"/search",children:t(ge,{})}),t(n,{path:"/product/:id",children:t(ue,{})}),t(n,{path:"/register",children:r?t(y,{to:"/",exact:!0}):t(ne,{})}),t(n,{path:"/login",children:r?t(y,{to:"/",exact:!0}):t(de,{})}),t(n,{path:"/cart",children:t(le,{})}),t(n,{path:"/success",children:r?t(pe,{}):t(y,{to:"/",exact:!0})}),t(n,{path:"/cancel",children:r?t(ce,{}):t(y,{to:"/",exact:!0})}),t(n,{path:"/checkout",children:r?t(ye,{}):t(y,{to:"/",exact:!0})}),t(n,{path:"/userorders",children:t(he,{})}),t(n,{path:"*",children:t(me,{})})]})})})},_e=M({palette:{primary:{main:"#fff"},secondary:{main:"#000"}},overrides:{MuiInput:{input:{"&::-webkit-outer-spin-button, &::-webkit-inner-spin-button":{"-webkit-appearance":"none",display:"none"}}}}});V.render(t(G.StrictMode,{children:t(B,{store:_,children:t(H,{loading:null,persistor:se,children:t(F,{injectFirst:!0,children:t(N,{theme:_e,children:t(ve,{})})})})})}),document.getElementById("root"));export{Re as a,X as b,K as c,qe as d,ke as e,je as f,ze as g,De as h,Oe as i,Te as j,Ae as k,Pe as l,xe as m,Ue as n,we as o,Ce as p,Le as q,Qe as u};
